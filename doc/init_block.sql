INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-20 23:35:35.801300', '2025-11-21 20:11:10.450351', 'admin', NULL, '#5C7CFA', 'CODE', 'æµ‹è¯•requests', 'ğŸ¶', '{}', b'1', 'requests', '{}', 1, '# -*- coding: utf-8 -*-\n\nimport requests\n\nr = requests.get(\'https://www.baidu.com\')\nprint(\'status:\', r.status_code)\nprint(\'content-type:\', r.headers.get(\'Content-Type\'))\nprint(\'text:\', r.text[:200])', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 10:06:10.245931', '2025-11-21 20:11:52.405127', 'admin', NULL, '#5C7CFA', 'CODE', 'æµ‹è¯•python-dateutil', 'ğŸ¤·â€â™‚ï¸', '{\"time\": {\"type\": \"string\", \"description\": \"è¾“å…¥æ—¥æœŸ\", \"defaultValue\": \"Nov 21, 2025\"}}', b'1', 'python-dateutil', '{\"time\": {\"type\": \"string\", \"description\": \"è¿”å›æ ¼å¼åŒ–çš„æ—¶é—´\"}}', 1, '# -*- coding: utf-8 -*-\n# pip install python-dateutil\n\nfrom dateutil import parser\n\n\n\"\"\"\næŠŠä»»æ„åˆæ³•æ—¥æœŸå­—ç¬¦ä¸²è½¬æˆ yyyy-mm-dd æ ¼å¼\nå¦‚æœè§£æå¤±è´¥è¿”å› None\n\"\"\"\n\ntimes = inputs.get(\'time\', \'21/11/2025\')\n\nformatting = parser.parse(time).strftime(\"%Y-%m-%d\")\n\n\noutputs = {\n    \"time\": formatting\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 14:48:47.379136', '2025-11-21 20:11:45.411570', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—a+b', 'ğŸ˜', '{\"a\": {\"type\": \"string\", \"description\": \"å‚æ•°a\", \"defaultValue\": \"1\"}, \"b\": {\"type\": \"string\", \"description\": \"å‚æ•°b\", \"defaultValue\": \"1\"}}', b'1', 'è®¡ç®—a+b', '{\"result\": {\"type\": \"string\", \"description\": \"è®¡ç®—ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"é»˜è®¤å­—æ®µ\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = int(inputs.get(\'b\', \'1\'))\n\nres = a + b                     # æ•°å€¼ç›¸åŠ \n\noutputs = {\n    \"success\": True,\n    \"result\": res\n}', '[]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 14:56:23.275332', '2025-11-21 20:11:37.759189', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—açš„å€æ•°', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"11\"}}', b'1', 'è®¡ç®—açš„å€æ•°', '{\"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\n\n\n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2   \n\noutputs = {\n    \"success\": True,\n    \"result\": res\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 15:10:51.170911', '2025-11-21 20:11:24.391172', 'admin', NULL, '#5C7CFA', 'CODE', 'è·å–ä¸Šä¸‹æ–‡', 'ğŸ˜Š', '{}', b'1', 'è·å–ä¸Šä¸‹æ–‡', '{\"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\nuser_name = inputs.get(\'ctx.USER_NAME\', \'def\')\n\n\noutputs = {\n    \"success\": True,\n    \"result\": user_name\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 20:12:21.306774', '2025-11-26 21:18:18.698241', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—açš„å€æ•°', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"11\"}}', b'1', 'è®¡ç®—açš„å€æ•°_copy', '{\"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\n\n\n # æ•°å€¼ä¹˜é»˜è®¤aa\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-26 19:56:14.301130', '2025-11-26 20:18:47.489401', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—açš„å€æ•°', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"2\"}, \"b\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•b\", \"defaultValue\": \"b\"}, \"c\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•c\", \"defaultValue\": \"c\"}}', b'1', 'éç©ºæµ‹è¯•', '{\"b\": {\"type\": \"string\", \"description\": \"\"}, \"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = inputs.get(\'b\', \'b\') \nb = inputs.get(\'c\', \'c\') \n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res,\n    \"b\": b\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-26 20:23:38.137624', '2025-11-26 20:33:01.546120', 'admin', NULL, '#5C7CFA', 'CODE', 'éç©ºæµ‹è¯•-æ— é»˜è®¤å€¼ï¼ˆæµç¨‹æµ‹è¯•', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"\"}, \"b\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•b\", \"defaultValue\": \"b\"}, \"c\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•c\", \"defaultValue\": \"c\"}}', b'1', 'éç©ºæµ‹è¯•-æ— é»˜è®¤å€¼ï¼ˆæµç¨‹æµ‹è¯•', '{\"b\": {\"type\": \"string\", \"description\": \"\"}, \"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = inputs.get(\'b\', \'b\') \nc = inputs.get(\'c\', \'c\') \n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res,\n    \"b\": b,\n    \"c\": c\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-12-01 10:56:32.688859', '2025-12-01 13:11:24.829937', 'admin', NULL, '#fb5b5b', 'CODE', 'æŸ¥çœ‹teamcityçš„æœåŠ¡ç«¯ç‚¹', 'ğŸ¤§', '{\"api\": {\"type\": \"string\", \"required\": false, \"description\": \"æ¥å£åœ°å€ï¼ˆé»˜è®¤æœåŠ¡ç«¯ç‚¹\", \"defaultValue\": \"/app/rest/server\"}, \"body\": {\"type\": \"string\", \"required\": false, \"description\": \"è¯·æ±‚ä½“ï¼ˆå¯é€‰ï¼Œç”¨äº POST/PUT è¯·æ±‚ï¼‰\", \"defaultValue\": \"\"}, \"method\": {\"type\": \"string\", \"required\": true, \"description\": \"æ¥å£è¯·æ±‚æ–¹å¼\", \"defaultValue\": \"GET\"}, \"use_https\": {\"type\": \"string\", \"required\": false, \"description\": \"æ˜¯å¦ä½¿ç”¨https\", \"defaultValue\": \"false\"}}', b'1', 'teamcity_æœåŠ¡ç«¯ç‚¹', '{\"data\": {\"type\": \"string\", \"description\": \"ç»“æœé›†\"}, \"message\": {\"type\": \"string\", \"description\": \"\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}, \"status_code\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\nimport http.client\nimport json\n\n\n# TeamCity é…ç½®å‚æ•°\nteamcity_port = int(inputs.get(\'ctx.TEAMCITY_PORT\', 8111))\nteamcity_token = inputs.get(\'ctx.TEAMCITY_TOKEN\')\nteamcity_host = inputs.get(\'ctx.TEAMCITY_HOST\', \'192.168.1.134\')\n\n# è¯·æ±‚ä½“ï¼ˆå¯é€‰ï¼Œç”¨äº POST/PUT è¯·æ±‚ï¼‰\nrequest_body = inputs.get(\'body\', \'\')\n\n# è¯·æ±‚å‚æ•°\nmethod = inputs.get(\'method\', \'GET\')\n# outputçš„è¿”å›æ—¶æ ¹æ® /app/rest/server å®šåˆ¶çš„\napi = inputs.get(\'api\', \'/app/rest/server\')\nuse_https_input = inputs.get(\'use_https\', \'false\')\nuse_https = str(use_https_input).lower() in [\'true\', \'1\', \'yes\', \'on\']  # âœ… æ‰‹åŠ¨è½¬æ¢\n\n# æ ¹æ®é…ç½®é€‰æ‹© HTTP æˆ– HTTPS\nif use_https:\n   print(f\"ä½¿ç”¨ HTTPS è¿æ¥åˆ° {teamcity_host}:{teamcity_port}\")\n   conn = http.client.HTTPSConnection(teamcity_host, teamcity_port)\nelse:\n   print(f\"ä½¿ç”¨ HTTP è¿æ¥åˆ° {teamcity_host}:{teamcity_port}\")\n   conn = http.client.HTTPConnection(teamcity_host, teamcity_port)\n\n# å‡†å¤‡è¯·æ±‚ä½“\npayload = request_body if request_body else \'\'\n\nheaders = {\n   \'Accept\': \'application/json\',\n   \'Authorization\': teamcity_token,\n   \'Content-Type\': \'application/json\'\n}\n\nconn.request(method, api, payload, headers)\n# è·å–å“åº”\nres = conn.getresponse()\nstatus_code = res.status\nresponse_data = res.read()\n\nprint(f\"å“åº”çŠ¶æ€ç : {status_code}\")\n# è§£ç å“åº”æ•°æ®\nresponse_text = response_data.decode(\"utf-8\")\n# å°è¯•è§£æä¸º JSON\ntry:\n   response_json = json.loads(response_text)\n   print(f\"å“åº”æ•°æ®ï¼ˆJSONï¼‰: {json.dumps(response_json, indent=2, ensure_ascii=False)[:500]}...\")\nexcept json.JSONDecodeError:\n   response_json = None\n   print(f\"å“åº”æ•°æ®ï¼ˆéJSONï¼‰: {response_text[:500]}...\")\n\noutputs = {\n   \"success\": True,\n   \"status_code\": status_code,\n   \"data\": response_json if response_json else response_text,\n   \"message\": f\"{method} è¯·æ±‚æˆåŠŸ\"\n}', '[\"teamcity\"]', 'test_code', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-12-01 13:06:21.192991', '2025-12-01 16:08:43.187131', 'admin', NULL, '#fb5b5b', 'CODE', 'è·å–jsonå…¥å‚', 'ğŸ¤§', '{\"data\": {\"type\": \"json\", \"required\": false, \"description\": \"jsonå‚æ•°\", \"defaultValue\": \"{     \\\"version\\\": \\\"2025.03.3 (build 186370)\\\",     \\\"versionMajor\\\": 2025,     \\\"versionMinor\\\": 3,     \\\"startTime\\\": \\\"20251120T164236+0800\\\",     \\\"currentTime\\\": \\\"20251201T133037+0800\\\",     \\\"buildNumber\\\": \\\"186370\\\",     \\\"buildDate\\\": \\\"20250617T000000+0800\\\",     \\\"internalId\\\": \\\"334bfcca-7b44-4eb0-9251-838a89df950d\\\",     \\\"role\\\": \\\"main_node\\\",     \\\"webUrl\\\": \\\"http://192.168.1.134:8111\\\",     \\\"projects\\\": {       \\\"href\\\": \\\"/app/rest/projects\\\"     },     \\\"vcsRoots\\\": {       \\\"href\\\": \\\"/app/rest/vcs-roots\\\"     },     \\\"builds\\\": {       \\\"href\\\": \\\"/app/rest/builds\\\"     },     \\\"users\\\": {       \\\"href\\\": \\\"/app/rest/users\\\"     },     \\\"userGroups\\\": {       \\\"href\\\": \\\"/app/rest/userGroups\\\"     },     \\\"agents\\\": {       \\\"href\\\": \\\"/app/rest/agents\\\"     },     \\\"buildQueue\\\": {       \\\"href\\\": \\\"/app/rest/buildQueue\\\"     },     \\\"agentPools\\\": {       \\\"href\\\": \\\"/app/rest/agentPools\\\"     },     \\\"investigations\\\": {       \\\"href\\\": \\\"/app/rest/investigations\\\"     },     \\\"mutes\\\": {       \\\"href\\\": \\\"/app/rest/mutes\\\"     },     \\\"artifactsUrl\\\": \\\"\\\",     \\\"nodes\\\": {       \\\"href\\\": \\\"/app/rest/server/nodes\\\"     }   }\"}}', b'1', 'è·å–jsonå…¥å‚', '{\"href\": {\"type\": \"string\", \"description\": \"\"}, \"baseUrl\": {\"type\": \"string\", \"description\": \"\"}, \"fullUrl\": {\"type\": \"string\", \"description\": \"\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}, \"versionInfo\": {\"type\": \"string\", \"description\": \"\"}, \"artifactsUrl\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\nimport json\nimport traceback\n\n# ---------- 1. å¥å£®è·å–å¹¶è§£æ ----------\nraw = inputs.get(\'data\', {})\n\ndata = json.loads(raw) \n\n# ---------- 2. åŸºæœ¬å­—æ®µ ----------\nbase_url = data.get(\'webUrl\', \'\').strip()\nartifacts_url = data.get(\'artifactsUrl\', \'\')\n\n# ---------- 3. æ‰€æœ‰ href æå– ----------\nhref_keys = [\n    \'projects\', \'vcsRoots\', \'builds\', \'users\', \'userGroups\',\n    \'agents\', \'buildQueue\', \'agentPools\', \'investigations\',\n    \'mutes\', \'nodes\'\n]\n\n# 3.1 ç›¸å¯¹è·¯å¾„\nhrefs = {k: data.get(k, {}).get(\'href\', \'\') for k in href_keys}\n\n# 3.2 å®Œæ•´ URLï¼ˆå»æ‰ base_url å°¾æ–œæ å†æ‹¼ï¼‰\nfull_urls = {\n    k: (base_url.rstrip(\'/\') + href) if href else \'\'\n    for k, href in hrefs.items()\n}\n\n# ---------- 4. å…¶ä»–å¸¸ç”¨å­—æ®µ ----------\nversion_info = {\n    \'version\': data.get(\'version\'),\n    \'buildNumber\': data.get(\'buildNumber\'),\n    \'role\': data.get(\'role\'),\n    \'internalId\': data.get(\'internalId\')\n}\n\n# ---------- 5. ç»Ÿä¸€è¾“å‡º ----------\noutputs = {\n    \'success\': True,\n    \'baseUrl\': base_url,           # æ ¹åœ°å€\n    \'artifactsUrl\': artifacts_url, # äº§ç‰©åœ°å€\n    \'href\': hrefs,                 # ç›¸å¯¹è·¯å¾„\n    \'fullUrl\': full_urls,          # å®Œæ•´åœ°å€\n    \'versionInfo\': version_info    # ç‰ˆæœ¬/è§’è‰²ç­‰\n}', '[\"json\"]', 'test_code', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-12-01 15:41:25.007581', '2025-12-01 15:51:21.950205', 'admin', NULL, '#fb5b5b', 'CODE', 'è·å–jsonå…¥å‚', 'ğŸ¤§', '{\"a\": {\"type\": \"string\", \"required\": false, \"description\": \"\", \"defaultValue\": \"\"}, \"b\": {\"type\": \"string\", \"required\": false, \"description\": \"\", \"defaultValue\": \"\"}, \"c\": {\"type\": \"string\", \"required\": false, \"description\": \"\", \"defaultValue\": \"\"}}', b'1', 'æµ‹è¯•è§£æjsonå…¥å‚-æµç¨‹', '{\"a\": {\"type\": \"string\", \"description\": \"\"}, \"b\": {\"type\": \"string\", \"description\": \"\"}, \"c\": {\"type\": \"string\", \"description\": \"\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n\n# ---------- 1. å¥å£®è·å–å¹¶è§£æ ----------\na = inputs.get(\'a\', \"a1\")\nb = inputs.get(\'b\', \"b1\")\nc = inputs.get(\'c\', \"c1\")\n\n# ---------- 5. ç»Ÿä¸€è¾“å‡º ----------\noutputs = {\n    \'success\': True,\n    \'a\': a, \n    \'b\': b,\n    \'c\': c\n}', '[\"json\"]', 'test_code', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-12-02 10:12:56.822531', '2025-12-02 10:56:18.534493', 'admin', NULL, '#fb5b5b', 'CODE', 'è·å–jsonå…¥å‚è¾“å‡ºlist', 'ğŸ¤§', '{\"data\": {\"type\": \"json\", \"required\": true, \"description\": \"jsonå‚æ•°\", \"defaultValue\": \"{     \\\"version\\\": \\\"2025.03.3 (build 186370)\\\",     \\\"versionMajor\\\": 2025,     \\\"versionMinor\\\": 3,     \\\"startTime\\\": \\\"20251120T164236+0800\\\",     \\\"currentTime\\\": \\\"20251201T133037+0800\\\",     \\\"buildNumber\\\": \\\"186370\\\",     \\\"buildDate\\\": \\\"20250617T000000+0800\\\",     \\\"internalId\\\": \\\"334bfcca-7b44-4eb0-9251-838a89df950d\\\",     \\\"role\\\": \\\"main_node\\\",     \\\"webUrl\\\": \\\"http://192.168.1.134:8111\\\",     \\\"projects\\\": {       \\\"href\\\": \\\"/app/rest/projects\\\"     },     \\\"vcsRoots\\\": {       \\\"href\\\": \\\"/app/rest/vcs-roots\\\"     },     \\\"builds\\\": {       \\\"href\\\": \\\"/app/rest/builds\\\"     },     \\\"users\\\": {       \\\"href\\\": \\\"/app/rest/users\\\"     },     \\\"userGroups\\\": {       \\\"href\\\": \\\"/app/rest/userGroups\\\"     },     \\\"agents\\\": {       \\\"href\\\": \\\"/app/rest/agents\\\"     },     \\\"buildQueue\\\": {       \\\"href\\\": \\\"/app/rest/buildQueue\\\"     },     \\\"agentPools\\\": {       \\\"href\\\": \\\"/app/rest/agentPools\\\"     },     \\\"investigations\\\": {       \\\"href\\\": \\\"/app/rest/investigations\\\"     },     \\\"mutes\\\": {       \\\"href\\\": \\\"/app/rest/mutes\\\"     },     \\\"artifactsUrl\\\": \\\"\\\",     \\\"nodes\\\": {       \\\"href\\\": \\\"/app/rest/server/nodes\\\"     }   }\"}}', b'1', 'è·å–jsonå…¥å‚_è¾“å‡ºlist', '{\"baseUrl\": {\"type\": \"string\", \"description\": \"\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}, \"hrefList\": {\"type\": \"string\", \"description\": \"hrefList\"}, \"versionInfo\": {\"type\": \"string\", \"description\": \"\"}, \"artifactsUrl\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\nimport json\nimport traceback\n\n# ---------- 1. å¥å£®è·å–å¹¶è§£æ ----------\nraw = inputs.get(\'data\', \'{}\')          # é»˜è®¤ç»™ä¸ª json å­—ç¬¦ä¸²ï¼Œé˜² None\ntry:\n    data = json.loads(raw)\nexcept Exception:\n    data = {}\n\n# ---------- 2. åŸºæœ¬å­—æ®µ ----------\nbase_url = data.get(\'webUrl\', \'\').strip()\nartifacts_url = data.get(\'artifactsUrl\', \'\')\n\n# ---------- 3. æ‰€æœ‰ href æå– ----------\nhref_keys = [\n    \'projects\', \'vcsRoots\', \'builds\', \'users\', \'userGroups\',\n    \'agents\', \'buildQueue\', \'agentPools\', \'investigations\',\n    \'mutes\', \'nodes\'\n]\n\n# 3.1 ç›¸å¯¹è·¯å¾„\nhrefs = {k: data.get(k, {}).get(\'href\', \'\') for k in href_keys}\n\n# 3.2 å®Œæ•´ URLï¼ˆå»æ‰ base_url å°¾æ–œæ å†æ‹¼ï¼‰\nfull_urls = {\n    k: (base_url.rstrip(\'/\') + href) if href else \'\'\n    for k, href in hrefs.items()\n}\n\n# ---------- 4. æŠŠ href / fullUrl å˜æˆ list ----------\nhref_list = []\nfor k in sorted(href_keys):          # å›ºå®šé¡ºåº\n    href_list.append({\n        \'key\': k,\n        \'href\': hrefs.get(k, \'\'),\n        \'fullUrl\': full_urls.get(k, \'\')\n    })\n\n# ---------- 5. å…¶ä»–å¸¸ç”¨å­—æ®µ ----------\nversion_info = {\n    \'version\': data.get(\'version\'),\n    \'buildNumber\': data.get(\'buildNumber\'),\n    \'role\': data.get(\'role\'),\n    \'internalId\': data.get(\'internalId\')\n}\n\n# ---------- 6. ç»Ÿä¸€è¾“å‡º ----------\noutputs = {\n    \'success\': True,\n    \'baseUrl\': base_url,\n    \'artifactsUrl\': artifacts_url,\n    \'hrefList\': href_list,        # æ–°çš„ list ç»“æ„\n    \'versionInfo\': version_info\n}', '[\"json\"]', 'test_code', '1.0.0');




