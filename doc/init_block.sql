INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-20 23:35:35.801300', '2025-11-21 20:11:10.450351', 'admin', NULL, '#5C7CFA', 'CODE', 'æµ‹è¯•requests', 'ğŸ¶', '{}', b'1', 'requests', '{}', 1, '# -*- coding: utf-8 -*-\n\nimport requests\n\nr = requests.get(\'https://www.baidu.com\')\nprint(\'status:\', r.status_code)\nprint(\'content-type:\', r.headers.get(\'Content-Type\'))\nprint(\'text:\', r.text[:200])', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 10:06:10.245931', '2025-11-21 20:11:52.405127', 'admin', NULL, '#5C7CFA', 'CODE', 'æµ‹è¯•python-dateutil', 'ğŸ¤·â€â™‚ï¸', '{\"time\": {\"type\": \"string\", \"description\": \"è¾“å…¥æ—¥æœŸ\", \"defaultValue\": \"Nov 21, 2025\"}}', b'1', 'python-dateutil', '{\"time\": {\"type\": \"string\", \"description\": \"è¿”å›æ ¼å¼åŒ–çš„æ—¶é—´\"}}', 1, '# -*- coding: utf-8 -*-\n# pip install python-dateutil\n\nfrom dateutil import parser\n\n\n\"\"\"\næŠŠä»»æ„åˆæ³•æ—¥æœŸå­—ç¬¦ä¸²è½¬æˆ yyyy-mm-dd æ ¼å¼\nå¦‚æœè§£æå¤±è´¥è¿”å› None\n\"\"\"\n\ntimes = inputs.get(\'time\', \'21/11/2025\')\n\nformatting = parser.parse(time).strftime(\"%Y-%m-%d\")\n\n\noutputs = {\n    \"time\": formatting\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 14:48:47.379136', '2025-11-21 20:11:45.411570', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—a+b', 'ğŸ˜', '{\"a\": {\"type\": \"string\", \"description\": \"å‚æ•°a\", \"defaultValue\": \"1\"}, \"b\": {\"type\": \"string\", \"description\": \"å‚æ•°b\", \"defaultValue\": \"1\"}}', b'1', 'è®¡ç®—a+b', '{\"result\": {\"type\": \"string\", \"description\": \"è®¡ç®—ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"é»˜è®¤å­—æ®µ\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = int(inputs.get(\'b\', \'1\'))\n\nres = a + b                     # æ•°å€¼ç›¸åŠ \n\noutputs = {\n    \"success\": True,\n    \"result\": res\n}', '[]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 14:56:23.275332', '2025-11-21 20:11:37.759189', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—açš„å€æ•°', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"11\"}}', b'1', 'è®¡ç®—açš„å€æ•°', '{\"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\n\n\n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2   \n\noutputs = {\n    \"success\": True,\n    \"result\": res\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 15:10:51.170911', '2025-11-21 20:11:24.391172', 'admin', NULL, '#5C7CFA', 'CODE', 'è·å–ä¸Šä¸‹æ–‡', 'ğŸ˜Š', '{}', b'1', 'è·å–ä¸Šä¸‹æ–‡', '{\"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\nuser_name = inputs.get(\'ctx.USER_NAME\', \'def\')\n\n\noutputs = {\n    \"success\": True,\n    \"result\": user_name\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-21 20:12:21.306774', '2025-11-26 21:18:18.698241', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—açš„å€æ•°', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"11\"}}', b'1', 'è®¡ç®—açš„å€æ•°_copy', '{\"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\n\n\n # æ•°å€¼ä¹˜é»˜è®¤aa\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-26 19:56:14.301130', '2025-11-26 20:18:47.489401', 'admin', NULL, '#5C7CFA', 'CODE', 'è®¡ç®—açš„å€æ•°', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"2\"}, \"b\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•b\", \"defaultValue\": \"b\"}, \"c\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•c\", \"defaultValue\": \"c\"}}', b'1', 'éç©ºæµ‹è¯•', '{\"b\": {\"type\": \"string\", \"description\": \"\"}, \"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = inputs.get(\'b\', \'b\') \nb = inputs.get(\'c\', \'c\') \n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res,\n    \"b\": b\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-26 20:23:38.137624', '2025-11-26 20:33:01.546120', 'admin', NULL, '#5C7CFA', 'CODE', 'éç©ºæµ‹è¯•-æ— é»˜è®¤å€¼ï¼ˆæµç¨‹æµ‹è¯•', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"\"}, \"b\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•b\", \"defaultValue\": \"b\"}, \"c\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•c\", \"defaultValue\": \"c\"}}', b'1', 'éç©ºæµ‹è¯•-æ— é»˜è®¤å€¼ï¼ˆæµç¨‹æµ‹è¯•', '{\"b\": {\"type\": \"string\", \"description\": \"\"}, \"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = inputs.get(\'b\', \'b\') \nc = inputs.get(\'c\', \'c\') \n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res,\n    \"b\": b,\n    \"c\": c\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-11-26 20:23:38.137624', '2025-11-26 20:33:01.546120', 'admin', NULL, '#5C7CFA', 'CODE', 'éç©ºæµ‹è¯•-æ— é»˜è®¤å€¼ï¼ˆæµç¨‹æµ‹è¯•', 'ğŸ˜', '{\"a\": {\"type\": \"number\", \"required\": true, \"description\": \"è®¡ç®—açš„å€æ•°\", \"defaultValue\": \"\"}, \"b\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•b\", \"defaultValue\": \"b\"}, \"c\": {\"type\": \"string\", \"required\": false, \"description\": \"æµ‹è¯•c\", \"defaultValue\": \"c\"}}', b'1', 'éç©ºæµ‹è¯•-æ— é»˜è®¤å€¼ï¼ˆæµç¨‹æµ‹è¯•', '{\"b\": {\"type\": \"string\", \"description\": \"\"}, \"result\": {\"type\": \"string\", \"description\": \"ç»“æœ\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\n\n# ä» inputs å–å‚ï¼Œé»˜è®¤ \"1\"\na = int(inputs.get(\'a\', \'1\'))   # è½¬æˆ int\nb = inputs.get(\'b\', \'b\') \nc = inputs.get(\'c\', \'c\') \n # æ•°å€¼ä¹˜é»˜è®¤\nres = a * 2 \n\noutputs = {\n    \"success\": True,\n    \"result\": res,\n    \"b\": b,\n    \"c\": c\n}', '[\"æµ‹è¯•\"]', 'tool', '1.0.0');
INSERT INTO `blocks` ( `create_time`, `update_time`, `author_username`, `blockly_definition`, `color`, `definition_mode`, `description`, `icon`, `inputs`, `is_public`, `name`, `outputs`, `python_env_id`, `script`, `tags`, `type_code`, `version`) VALUES ( '2025-12-01 13:06:21.192991', '2025-12-01 13:42:09.186902', 'admin', NULL, '#fb5b5b', 'CODE', 'è·å–jsonå…¥å‚', 'ğŸ¤§', '{\"data\": {\"type\": \"json\", \"required\": false, \"description\": \"jsonå‚æ•°\", \"defaultValue\": \"{     \\\"version\\\": \\\"2025.03.3 (build 186370)\\\",     \\\"versionMajor\\\": 2025,     \\\"versionMinor\\\": 3,     \\\"startTime\\\": \\\"20251120T164236+0800\\\",     \\\"currentTime\\\": \\\"20251201T133037+0800\\\",     \\\"buildNumber\\\": \\\"186370\\\",     \\\"buildDate\\\": \\\"20250617T000000+0800\\\",     \\\"internalId\\\": \\\"334bfcca-7b44-4eb0-9251-838a89df950d\\\",     \\\"role\\\": \\\"main_node\\\",     \\\"webUrl\\\": \\\"http://192.168.1.134:8111\\\",     \\\"projects\\\": {       \\\"href\\\": \\\"/app/rest/projects\\\"     },     \\\"vcsRoots\\\": {       \\\"href\\\": \\\"/app/rest/vcs-roots\\\"     },     \\\"builds\\\": {       \\\"href\\\": \\\"/app/rest/builds\\\"     },     \\\"users\\\": {       \\\"href\\\": \\\"/app/rest/users\\\"     },     \\\"userGroups\\\": {       \\\"href\\\": \\\"/app/rest/userGroups\\\"     },     \\\"agents\\\": {       \\\"href\\\": \\\"/app/rest/agents\\\"     },     \\\"buildQueue\\\": {       \\\"href\\\": \\\"/app/rest/buildQueue\\\"     },     \\\"agentPools\\\": {       \\\"href\\\": \\\"/app/rest/agentPools\\\"     },     \\\"investigations\\\": {       \\\"href\\\": \\\"/app/rest/investigations\\\"     },     \\\"mutes\\\": {       \\\"href\\\": \\\"/app/rest/mutes\\\"     },     \\\"artifactsUrl\\\": \\\"\\\",     \\\"nodes\\\": {       \\\"href\\\": \\\"/app/rest/server/nodes\\\"     }   }\"}}', b'1', 'è·å–jsonå…¥å‚', '{\"api\": {\"type\": \"string\", \"description\": \"\"}, \"url\": {\"type\": \"string\", \"description\": \"\"}, \"success\": {\"type\": \"string\", \"description\": \"\"}}', 1, '# -*- coding: utf-8 -*-\nimport json\nimport traceback\n\n# ---------- 1. å¥å£®è·å–å¹¶è§£æ ----------\nraw = inputs.get(\'data\', {})\n\ndata = json.loads(raw) \n\n# ---------- 2. åŸºæœ¬å­—æ®µ ----------\nbase_url = data.get(\'webUrl\', \'\').strip()\nartifacts_url = data.get(\'artifactsUrl\', \'\')\n\n# ---------- 3. æ‰€æœ‰ href æå– ----------\nhref_keys = [\n    \'projects\', \'vcsRoots\', \'builds\', \'users\', \'userGroups\',\n    \'agents\', \'buildQueue\', \'agentPools\', \'investigations\',\n    \'mutes\', \'nodes\'\n]\n\n# 3.1 ç›¸å¯¹è·¯å¾„\nhrefs = {k: data.get(k, {}).get(\'href\', \'\') for k in href_keys}\n\n# 3.2 å®Œæ•´ URLï¼ˆå»æ‰ base_url å°¾æ–œæ å†æ‹¼ï¼‰\nfull_urls = {\n    k: (base_url.rstrip(\'/\') + href) if href else \'\'\n    for k, href in hrefs.items()\n}\n\n# ---------- 4. å…¶ä»–å¸¸ç”¨å­—æ®µ ----------\nversion_info = {\n    \'version\': data.get(\'version\'),\n    \'buildNumber\': data.get(\'buildNumber\'),\n    \'role\': data.get(\'role\'),\n    \'internalId\': data.get(\'internalId\')\n}\n\n# ---------- 5. ç»Ÿä¸€è¾“å‡º ----------\noutputs = {\n    \'success\': True,\n    \'baseUrl\': base_url,           # æ ¹åœ°å€\n    \'artifactsUrl\': artifacts_url, # äº§ç‰©åœ°å€\n    \'href\': hrefs,                 # ç›¸å¯¹è·¯å¾„\n    \'fullUrl\': full_urls,          # å®Œæ•´åœ°å€\n    \'versionInfo\': version_info    # ç‰ˆæœ¬/è§’è‰²ç­‰\n}', '[\"json\"]', 'test_code', '1.0.0');
